# 成本估算

## 1. 成本概览

### 1.1 阶段成本

| 阶段 | 时间 | 服务器 | LLM API | 总计/月 |
|------|------|--------|---------|---------|
| MVP (Phase 0-2) | 1-5 周 | ¥300 | ¥150 | **¥450** |
| 成熟期 (Phase 3+) | 6 周+ | ¥500 | ¥0-100 | **¥500-600** |
| 本地模型 | 可选 | ¥800 | ¥0 | **¥800** |

### 1.2 年度成本预算

| 方案 | 月成本 | 年成本 |
|------|--------|--------|
| 云端 API 方案 | ¥450 | ¥5,400 |
| 混合方案 | ¥550 | ¥6,600 |
| 全本地方案 | ¥800 | ¥9,600 |

## 2. 服务器成本

### 2.1 开发/测试环境

| 配置 | 规格 | 月成本 | 说明 |
|------|------|--------|------|
| 最低配置 | 2C4G | ¥150 | 勉强运行 |
| **推荐配置** | 4C8G | ¥300 | 流畅运行 |
| 高配 | 8C16G | ¥600 | 含本地模型 |

### 2.2 生产环境（AWS）

| 资源 | 规格 | 月成本 | 说明 |
|------|------|--------|------|
| EC2 / EKS | t3.large (2C8G) | ¥500 | N8N + Dify |
| RDS MySQL | db.t3.small | ¥300 | 数据库 |
| ALB | - | ¥150 | 负载均衡 |
| EBS | 100GB gp3 | ¥50 | 存储 |
| **总计** | | **¥1,000** | |

### 2.3 本地模型额外成本

| 资源 | 规格 | 增量成本 |
|------|------|----------|
| GPU 服务器 | RTX 4090 | ¥3,000/月（租用） |
| 高内存服务器 | 32G+ RAM | ¥500/月 |

## 3. LLM API 成本

### 3.1 OpenAI 定价

| 模型 | 输入 (1M tokens) | 输出 (1M tokens) |
|------|-----------------|-----------------|
| GPT-4o-mini | $0.15 | $0.60 |
| GPT-4o | $2.50 | $10.00 |
| GPT-4 Turbo | $10.00 | $30.00 |

### 3.2 国内替代

| 模型 | 输入 (1M tokens) | 输出 (1M tokens) |
|------|-----------------|-----------------|
| 通义千问 | ¥0.50 | ¥2.00 |
| 文心一言 | ¥0.80 | ¥2.00 |
| DeepSeek | ¥1.00 | ¥2.00 |

### 3.3 使用量估算

假设每日：
- 50 次任务分析，平均 500 tokens/次
- 20 次告警分析，平均 1000 tokens/次

| 模型 | 日 Token | 月 Token | 月成本 |
|------|----------|----------|--------|
| GPT-4o-mini | ~45K | ~1.4M | ~¥15 |
| GPT-4o | ~45K | ~1.4M | ~¥150 |
| 通义千问 | ~45K | ~1.4M | ~¥5 |

### 3.4 本地模型成本

| 模型 | 硬件要求 | 一次性成本 | 运行成本 |
|------|----------|------------|----------|
| Qwen2.5-7B | 16G RAM | ¥0 | ¥0 |
| Qwen2.5-14B | 32G RAM | ¥0 | ¥0 |
| Llama3-8B | 16G RAM | ¥0 | ¥0 |

## 4. 软件成本

### 4.1 开源组件

| 组件 | 许可证 | 成本 |
|------|--------|------|
| N8N | Fair-code | ¥0 |
| Dify | Apache 2.0 | ¥0 |
| PostgreSQL | PostgreSQL | ¥0 |
| Redis | BSD | ¥0 |
| Ollama | MIT | ¥0 |

### 4.2 企业版对比

| 产品 | 开源版 | 企业版 |
|------|--------|--------|
| N8N | 功能完整 | $20/用户/月 |
| Dify | 功能完整 | 联系销售 |

**结论：开源版完全满足需求，无需企业版。**

## 5. 人力成本

### 5.1 开发阶段

| 阶段 | 人天 | 人月 |
|------|------|------|
| Phase 0 | 5 | 0.25 |
| Phase 1 | 15 | 0.75 |
| Phase 2 | 12 | 0.6 |
| Phase 3 | 10 | 0.5 |
| **总计** | **42** | **2.1** |

### 5.2 运维成本

| 事项 | 时间/月 | 说明 |
|------|---------|------|
| 日常监控 | 2 小时 | 巡检 |
| 问题处理 | 4 小时 | 偶发问题 |
| 更新升级 | 2 小时 | 月度更新 |
| **总计** | **8 小时** | ~0.5 天/月 |

## 6. 成本优化建议

### 6.1 短期优化

| 措施 | 节省 | 说明 |
|------|------|------|
| 使用 GPT-4o-mini | 90% | vs GPT-4o |
| 使用通义千问 | 95% | vs OpenAI |
| 共用现有服务器 | 100% | 如有空闲资源 |

### 6.2 中期优化

| 措施 | 节省 | 说明 |
|------|------|------|
| 部署本地模型 | 100% LLM | 需 GPU/高内存 |
| 预留实例 | 30-50% | AWS RI |

### 6.3 长期优化

| 措施 | 节省 | 说明 |
|------|------|------|
| 自建 GPU 服务器 | 长期降本 | 高初期投入 |
| 批量采购 API | 议价空间 | 企业协议 |

## 7. ROI 分析

### 7.1 收益估算

| 收益项 | 估算 | 说明 |
|--------|------|------|
| 任务处理效率 | +30% | 自动分析节省时间 |
| 告警响应速度 | +50% | 快速分类定位 |
| 知识传承 | 无价 | 减少人员依赖 |

### 7.2 投入回报

假设运维团队 5 人，平均工资 ¥20,000/月：

| 项目 | 数值 |
|------|------|
| 月人力成本 | ¥100,000 |
| 效率提升 30% | ¥30,000/月 |
| 平台月成本 | ¥500 |
| **月净收益** | **¥29,500** |
| **ROI** | **5900%** |

## 8. 费用审批

### 8.1 一次性费用

| 项目 | 金额 | 审批 |
|------|------|------|
| 开发人力 | 2.1 人月 | 部门预算 |
| 服务器购买/首月 | ¥300-500 | IT 预算 |

### 8.2 持续费用

| 项目 | 月金额 | 年金额 | 审批 |
|------|--------|--------|------|
| 服务器 | ¥300-500 | ¥3,600-6,000 | IT 预算 |
| LLM API | ¥100-200 | ¥1,200-2,400 | 运营预算 |
