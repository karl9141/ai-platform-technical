# 实施计划

## 1. 阶段规划

### 1.1 整体时间线

```
Week 1        Week 3        Week 5        Week 7        Week 9+
  │             │             │             │             │
  ▼             ▼             ▼             ▼             ▼
┌───┐         ┌───┐         ┌───┐         ┌───┐         ┌───┐
│P0 │─────────│P1 │─────────│P2 │─────────│P3 │─────────│P4 │
│环境│         │任务│         │告警│         │知识│         │健康│
│搭建│         │收集│         │分析│         │库  │         │评估│
└───┘         └───┘         └───┘         └───┘         └───┘
```

### 1.2 阶段详情

| 阶段 | 时间 | 目标 | 交付物 |
|------|------|------|--------|
| **Phase 0** | 1 周 | 环境搭建 | N8N + Dify 部署完成 |
| **Phase 1** | 2 周 | 任务收集 MVP | Lark→分析→Jira（含确认） |
| **Phase 2** | 2 周 | 告警分析 MVP | 告警→分类→通知 |
| **Phase 3** | 2 周 | 知识库沉淀 | RAG 告警知识库 |
| **Phase 4** | 后续 | 健康度评估 | 递交流程标准化 |

## 2. Phase 0：环境搭建

### 2.1 任务清单

| 任务 | 负责人 | 预计时间 | 前置依赖 |
|------|--------|----------|----------|
| 服务器准备 | 运维 | 1 天 | - |
| Docker 环境部署 | 运维 | 0.5 天 | 服务器 |
| N8N 部署 | 开发 | 0.5 天 | Docker |
| Dify 部署 | 开发 | 0.5 天 | Docker |
| PostgreSQL 配置 | 开发 | 0.5 天 | Docker |
| 网络配置（Lark Webhook） | 运维 | 0.5 天 | 服务器 |
| OpenAI API Key 申请 | PM | 1 天 | - |
| Lark Bot 创建 | PM | 1 天 | - |
| Jira API Token | PM | 0.5 天 | - |

### 2.2 验收标准

- [ ] N8N 可访问，登录正常
- [ ] Dify 可访问，登录正常
- [ ] Lark Webhook 可收到测试消息
- [ ] Jira API 可创建测试 Issue

## 3. Phase 1：任务收集 MVP

### 3.1 任务清单

| 任务 | 负责人 | 预计时间 | 前置依赖 |
|------|--------|----------|----------|
| N8N Lark Webhook 配置 | 开发 | 0.5 天 | Phase 0 |
| Dify 任务分析应用创建 | 开发 | 1 天 | Phase 0 |
| Prompt 设计与调优 | 开发 | 2 天 | Dify 应用 |
| N8N → Dify 集成 | 开发 | 0.5 天 | Dify 应用 |
| Lark 交互卡片开发 | 开发 | 1 天 | Webhook |
| N8N → Jira 集成 | 开发 | 0.5 天 | Jira Token |
| 确认回调处理 | 开发 | 1 天 | 卡片 |
| 审计日志 | 开发 | 0.5 天 | - |
| 端到端测试 | QA | 1 天 | 全部 |
| 小范围试用 | 全员 | 2 天 | 测试通过 |

### 3.2 最小功能集

- ✅ Lark 群 @运维 触发
- ✅ AI 判断是否为任务请求
- ✅ 生成任务摘要
- ✅ 推送 Lark 确认卡片
- ✅ Leader 确认后创建 Jira

### 3.3 暂不实现

- ❌ 智能分配建议（Phase 3 实现）
- ❌ 任务负载分析
- ❌ 历史任务学习

### 3.4 验收标准

- [ ] @运维 消息 5 秒内收到分析结果
- [ ] 任务识别准确率 > 90%
- [ ] 确认后 Jira 创建成功率 100%

## 4. Phase 2：告警分析 MVP

### 4.1 任务清单

| 任务 | 负责人 | 预计时间 | 前置依赖 |
|------|--------|----------|----------|
| N8N IMAP 配置 | 开发 | 0.5 天 | 邮箱账号 |
| Dify 告警分析应用 | 开发 | 1 天 | - |
| 告警分类 Prompt | 开发 | 2 天 | Dify 应用 |
| N8N 告警解析 | 开发 | 1 天 | IMAP |
| Lark 告警通知卡片 | 开发 | 0.5 天 | - |
| 邮件回复模板生成 | 开发 | 1 天 | - |
| 端到端测试 | QA | 1 天 | 全部 |

### 4.2 最小功能集

- ✅ 接收告警邮件
- ✅ AI 分类（CPU/内存/应用/网络）
- ✅ 推送 Lark 告警摘要
- ✅ 生成邮件回复模板

### 4.3 暂不实现

- ❌ 知识库匹配（Phase 3）
- ❌ 自动回复

### 4.4 验收标准

- [ ] 告警邮件 30 秒内推送通知
- [ ] 分类准确率 > 85%
- [ ] 回复模板质量用户满意度 > 80%

## 5. Phase 3：知识库沉淀

### 5.1 任务清单

| 任务 | 负责人 | 预计时间 | 前置依赖 |
|------|--------|----------|----------|
| 历史告警数据整理 | 运维 | 2 天 | - |
| Dify 知识库创建 | 开发 | 0.5 天 | 数据 |
| RAG 检索调优 | 开发 | 2 天 | 知识库 |
| 告警分析集成 RAG | 开发 | 1 天 | RAG |
| 知识库更新流程 | 开发 | 1 天 | - |
| 测试与验证 | QA | 1 天 | 全部 |

### 5.2 验收标准

- [ ] 相似案例匹配准确率 > 70%
- [ ] 知识库自动更新正常
- [ ] 告警处理效率提升 > 30%

## 6. 风险与缓解

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|----------|
| 服务器延迟交付 | 中 | 高 | 提前申请，备用云服务器 |
| Prompt 效果不理想 | 中 | 中 | 预留调优时间，参考最佳实践 |
| Lark API 限制 | 低 | 中 | 提前测试限流，做好降级 |
| 团队学习成本 | 中 | 低 | 提供培训文档，逐步推广 |

## 7. 资源需求

### 7.1 人力

| 角色 | Phase 0 | Phase 1 | Phase 2 | Phase 3 |
|------|---------|---------|---------|---------|
| 开发 | 0.5 人 | 1 人 | 1 人 | 0.5 人 |
| 运维 | 0.5 人 | 0.2 人 | 0.2 人 | 0.2 人 |
| QA | - | 0.3 人 | 0.3 人 | 0.3 人 |
| PM | 0.2 人 | 0.2 人 | 0.1 人 | 0.1 人 |

### 7.2 基础设施

| 资源 | 规格 | 用途 |
|------|------|------|
| 服务器 | 4C8G | N8N + Dify + DB |
| 域名 | 可选 | 内网可不需要 |
| OpenAI API | ~$50/月 | LLM 调用 |

## 8. 沟通计划

| 事项 | 频率 | 参与人 |
|------|------|--------|
| 每日站会 | 每日 | 开发团队 |
| 周进度汇报 | 每周 | PM + 相关方 |
| 阶段评审 | 阶段结束 | 全员 |
| 用户反馈收集 | 试用期间 | PM |
