# =============================================================================
# AI Platform - 环境变量模板
# =============================================================================
# 版本: 4.0 - 服务化架构
# 使用方法:
#   1. 复制此文件: cp .env.example .env.local
#   2. 修改必要的密钥和密码
#   3. 运行部署脚本: ./deploy-local.sh
# =============================================================================

# -----------------------------------------------------------------------------
# 部署环境
# -----------------------------------------------------------------------------
DEPLOY_ENV=local
COMPOSE_PROJECT_NAME=ai-platform

# -----------------------------------------------------------------------------
# 共享基础设施 - PostgreSQL
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<YOUR_SECURE_PASSWORD>
POSTGRES_DB=postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# 各服务数据库名称
DIFY_DB_NAME=dify
DIFY_PLUGIN_DB_NAME=dify_plugin
N8N_DB_NAME=n8n

# -----------------------------------------------------------------------------
# 共享基础设施 - Redis
# -----------------------------------------------------------------------------
REDIS_PASSWORD=<YOUR_REDIS_PASSWORD>
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Dify 配置
# -----------------------------------------------------------------------------
# 版本
DIFY_VERSION=1.12.0

# 密钥 (必须使用强密钥: openssl rand -base64 42)
SECRET_KEY=<YOUR_SECRET_KEY>
PLUGIN_DAEMON_KEY=<YOUR_PLUGIN_DAEMON_KEY>
PLUGIN_DIFY_INNER_API_KEY=<YOUR_INNER_API_KEY>
SANDBOX_API_KEY=<YOUR_SANDBOX_API_KEY>

# URL 配置 (本地环境)
CONSOLE_WEB_URL=http://localhost:3000
CONSOLE_API_URL=http://localhost:3000
APP_WEB_URL=http://localhost:3000
APP_API_URL=http://localhost:3000
SERVICE_API_URL=http://localhost:3000
FILES_URL=http://localhost:3000

# CORS
CONSOLE_CORS_ALLOW_ORIGINS=*
WEB_API_CORS_ALLOW_ORIGINS=*

# 存储
STORAGE_TYPE=opendal
OPENDAL_SCHEME=fs
OPENDAL_FS_ROOT=storage

# 向量数据库
VECTOR_STORE=weaviate

# -----------------------------------------------------------------------------
# N8N 配置
# -----------------------------------------------------------------------------
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_ENCRYPTION_KEY=<YOUR_N8N_ENCRYPTION_KEY>
WEBHOOK_URL=http://localhost:5678/

# -----------------------------------------------------------------------------
# 通用配置
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
TZ=Asia/Tokyo
TIMEZONE=Asia/Tokyo

# -----------------------------------------------------------------------------
# Marketplace (Dify)
# -----------------------------------------------------------------------------
MARKETPLACE_API_URL=https://marketplace.dify.ai
MARKETPLACE_URL=https://marketplace.dify.ai
